# JPA란?

> Java Persistence API

<br>

JPA는 자바 표준 **ORM** 프레임워크이다.

> **ORM**, Object Relational Mapping
>
> 객체와 관계형 데이터베이스 간의 차이를 중간에서 해결해주는 프레임워크

<br>

## JPA를 사용하지 않는 기존 방식의 문제점

- 진정한 의미의 계층 분할이 어렵다.
- 엔티티를 신뢰할 수 없다.
- SQL에 의존적인 개발을 피하기 어렵다.

<br>

## SQL을 직접 다룰 때 발생하는 문제점

- 반복적인 CRUD SQL 문제
- 데이터베이스 의존 문제
- 패러다임 불일치
- 객체 중심 개발 X

<br>

## JPA의 해결 방안

### 반복적인 CRUD SQL 문제

의미 없이 중복되는 코드를 개선해 준다.

### 데이터베이스 의존 문제

관계형 데이터베이스는 같은 기능도 벤더마다 사용법이 다른 경우가 있어 데이터베이스 교체 시 문제가 생길 수 있다.
JPA를 사용하면 데이터베이스 교체 시 어떤 데이터베이스로 교체하는지만 알려주면 된다.

### 패러다임 불일치

관계형 데이터베이스와 객체지향 프로그래밍 언어 사이의 생기는 아래 문제들을 해결해 준다.

- 상속
  - 데이터베이스에는 상속 개념이 존재하지 않는다.
  - 개발자는 자바 컬렉션에 객체를 저장하듯이 JPA에게 객체를 저장하면 된다.
- 연관관계

  - **객체는 참조**를 사용하여 다른 객체와 연관관계를 가지고 **참조에 접근해서 연관된 객체를 조회**한다.
  - **테이블은 외래 키**를 사용해서 연관관계를 가지고 **조인을 사용해서 연관된 테이블을 조회**한다.
  - JPA는 참조를 외래 키로 변환해서 적절한 INSERT SQL을 데이터베이스에 전달해 처리해준다.

- 객체 그래프 탐색
  - 참조를 사용해서 연관된 객체를 찾는 방식으로,
    JPA를 사용하면 객체는 마음껏 그래프를 탐색할 수 있다.
- 비교
  - 데이터베이스와 자바는 객체를 비교하는 방식에 차이가 있어서 생길 수 있는 문제를 JPA가 해결해 준다.
    - 데이터베이스: 기본 키
    - 자바: 동일성(`==`), 동등성(`equals()`)
  - **JPA는 같은 트랜잭션일 때 같은 객체가 조회되는 것을 보장한다.**

### 객체 중심 개발 X

객체를 중심으로 개발할 수 있게 해준다.

- 생산성이 증가하고 유지보수가 편해진다.
- 테스트 코드 작성 편리하다.

<br>

## JPA를 사용해야 하는 이유

- 생산성
- 유지보수
- 패러다임의 불일치 해결
- 성능
- 데이터 접근 추상화와 벤더 독립성
- 표준

<br>

## 참고

- 자바 ORM 표준 JPA 프로그래밍 by 김영한
